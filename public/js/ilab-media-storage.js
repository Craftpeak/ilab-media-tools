function clientRectContainsPoint(e,t,i){return t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom}!function(e){var t=function(){e(".info-panel-tabs").each(function(){var t=e(this),i=null,n=null;t.find("li").each(function(){var t=e(this),a=e("#"+t.data("tab-target"));t.hasClass("active")&&(i=t,n=a),t.on("click",function(e){i!=t&&(i.removeClass("active"),n.css({display:"none"}),t.addClass("active"),a.css({display:""}),i=t,n=a)})})});var t=null;e(".info-file-info-size").each(function(){t||(t=e(this))}),e("#ilab-other-sizes").on("change",function(i){var n=e("#info-size-"+e(this).val());n!=t&&(t.css({display:"none"}),n.css({display:""}),t=n)}),e(".ilab-info-regenerate-thumbnails").on("click",function(t){var i=e(this);return!(i.data("imgix-enabled")&&!confirm("You are currently using Imgix, which makes this function rather unnecessary.  Are you sure you want to continue?"))&&(e(document).trigger("ilab-regeneration-started"),t.preventDefault(),i.css({display:"none"}),e("#ilab-info-regenerate-status").css({display:""}),e.post(ajaxurl,{action:"ilab_media_cloud_regenerate_file",post_id:i.data("post-id")},function(t){i.css({display:""}),e("#ilab-info-regenerate-status").css({display:"none"}),"success"!=t.status&&alert(t.message),e(document).trigger("ilab-regeneration-ended")}),!1)})};t();var i=!0,n=!0,a=e('<div class="ilab-loader-container"><div class="ilab-loader ilab-loader-dark"></div></div>'),o=e('<div id="ilab-media-grid-info-popup" class="hidden" style="left:0px; top:0px;"></div>'),s=e('<div class="ilab-media-grid-info-popup-content"></div>'),d=e('<div class="ilab-media-popup-arrow-left"><div></div></div>'),l=e('<div class="ilab-media-popup-arrow-right"><div></div></div>'),c=null,r=!1;o.append(d),o.append(s),o.append(l),e("body").append(o),e(document).on("mouseenter","img.ilab-s3-logo",function(n){if(i){var u=e(this),p=u.data("post-id");"image"!=u.data("mime-type")?o.addClass("ilab-popup-document"):o.removeClass("ilab-popup-document"),r=!1,e("li.attachment").each(function(){var t=e(this);t.data("id")==p?(t.removeClass("info-unfocused"),t.addClass("info-focused")):(t.removeClass("info-focused"),t.addClass("info-unfocused"))}),s.text(""),s.append(a);var f=this.getBoundingClientRect(),m=document.body.scrollTop+(f.top+f.height/2-o.height()/2);m-=28;var h=Math.max(document.documentElement.clientHeight,window.innerHeight||0),g=Math.max(document.documentElement.clientWidth,window.innerWidth||0),v=document.body.scrollTop+h-40,b=0;m+o.height()>v?(b=m+o.height()-v,m=v-o.height()):m<document.body.scrollTop?(b=m-document.body.scrollTop,m=document.body.scrollTop):m<0&&(b=m,m=0),f.left+o.width()<g-10?(c=d,d.css({transform:"translateY("+b+"px)"}),o.removeClass("popup-right"),o.addClass("popup-left"),o.css({left:f.left+"px",top:m+"px"})):(c=l,o.removeClass("popup-left"),o.addClass("popup-right"),l.css({transform:"translateY("+b+"px)"}),o.css({left:f.right-o.width()+"px",top:m+"px"})),o.removeClass("hidden"),setTimeout(function(){var i={action:"ilab_s3_get_media_info",id:p};e.post(ajaxurl,i,function(i,n){if(0!=i.length){var a=e(i);s.text(""),s.append(a),t(),setTimeout(function(){r=!0},500)}},"html")},300)}}),e(document).on("mousemove",function(t){if(r&&n){var a=c.get(0).getBoundingClientRect();a.top-=5,a.bottom+=5;var d=s.get(0).getBoundingClientRect(),l=t.pageX,u=t.pageY-document.body.scrollTop;clientRectContainsPoint(a,l,u)||clientRectContainsPoint(d,l,u)||(i=!1,r=!1,o.addClass("hidden"),e("li.attachment").each(function(){var t=e(this);t.removeClass("info-focused"),t.removeClass("info-unfocused")}),setTimeout(function(){i=!0},300))}}),e(document).on("ilab-regeneration-started",function(){n=!1}),e(document).on("ilab-regeneration-ended",function(){n=!0})}(jQuery);